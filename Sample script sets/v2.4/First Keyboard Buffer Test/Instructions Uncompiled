r0 = 0
r1 = 1
r2 = 2
r3 = 3
r4 = 4
rSP = 5
rFlags = 6
rPC = 7

r_col = 0
g_col = 1
b_col = 2
x_coord = 3
y_coord = 4
set_px = 5
fill_display = 6
push_buffer = 7

on = 255
off = 0

delay_duration = 255

init:
    ldi r0 10
    spd r0 x_coord
    ldi r0 245
    spd r0 y_coord

loop:
    # check movement w
    pti 1 r1 # input the key pressed byte IO thing
    ldi r2 0b00000001 # add the filter
    and r1 r2 # filter w key
    xor r1 r2 # check w
    jiz r1 press_w # jump if pressed
pressed_w:
    spd push_buffer
    ldi r0 off
    spd r0 r_col
    spd r0 g_col
    spd r0 b_col
    spd set_px
    jmp loop



press_w:
    ldi r0 on
    spd r0 r_col
    spd r0 g_col
    spd r0 b_col
    spd set_px
    jmp pressed_w



delay:
    psh r4
    ldi r4 delay_duration
delay_loop:
    dec r4
    jiz r4 exit_delay
    jmp delay_loop
exit_delay:
    pop r4
    rtn