r0 = 0
r1 = 1
r2 = 2
r3 = 3
r4 = 4
r5 = 5
r6 = 6
r7 = 7

rSP = 5
rFlags = 6
rPC = 7

r_col = 0
g_col = 1
b_col = 2
x_coord = 3
y_coord = 4
set_px = 5
fill_display = 6
push_buffer = 7

on = 255
off = 0

init:
    # set red pixel
    
    ldi r0 on
    spd r0 r_col
    
    ldi r0 128
    spd r0 x_coord
    spd r0 y_coord
    spd set_px

    ldi r0 0
    spd r0 x_coord
    spd r0 y_coord

loop:
    pti 9 r0
    spd r0 x_coord

    pti 10 r0
    spd r0 y_coord

    spd r1 r_col 1 # store r in 0
    ldi r2 0
    str r1 r2

    spd r1 g_col 1 # store g in 0
    ldi r2 1
    str r1 r2

    spd r1 b_col 1 # store b in 0
    ldi r2 2
    str r1 r2

    ldi r0 on
    spd r0 r_col
    spd r0 g_col
    spd r0 b_col

    spd set_px

    spd push_buffer # display cursor

    # restore the pixel back 

    ldi r0 0
    lod r0 r0
    spd r_col

    ldi r0 1
    lod r0 r0
    spd g_col

    ldi r0 3
    lod r0 r0
    spd b_col

    spd set_px

    jmp loop